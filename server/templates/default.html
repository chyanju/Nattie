<!DOCTYPE html>
<html>
	<head>
		<!-- Standard Meta -->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
		<!-- Site Properties -->
		<title>Nattie - Deduction Powered Program Synthesis</title>
		<!-- style component -->
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.8.7/semantic.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.8.7/semantic.min.js"></script>
		<style type="text/css">
			.main {
				margin-top: 80px;
				margin-bottom: 80px;
			}
			.ProblemCard {
			}
			.TableCell {
				font-size: 12px;
			}
			textarea {
				min-height: 50px;
				resize: none; /*useless due to semantic ui*/
				overflow: hidden;
				width: 100%;
				border: none; /*useless due to semantic ui*/
			}
			.wtHider {
				margin: auto; /*make the table centered*/
			}
		</style>
		<!-- table component -->
		<script src="https://cdn.jsdelivr.net/npm/handsontable@8.0.0/dist/handsontable.full.min.js"></script>
		<link href="https://cdn.jsdelivr.net/npm/handsontable@8.0.0/dist/handsontable.full.min.css" rel="stylesheet" media="screen">
	</head>
	<body>
		<!-- start: top menu -->
		<div class="ui top fixed inverted menu">
			<div class="ui container">
				<div class="header item">
					<img class="logo" src="{{ url_for('static', filename='icon.png') }">
					Trinity | Data Wrangling
				</div>
				<div class="right menu">
					<a href="#" class="item"><i class="chalkboard teacher icon"></i>Tutorial</a>
					<a href="#" class="item"><i class="book open icon"></i>Documentation</a>
				</div>
			</div>
		</div>
		<!-- end: top menu -->
		<!-- start: main container -->
		<div class="ui main text container">

			<!-- start: problem card -->
			<div class="ui fitted center aligned blue segment ProblemCard">
				<!-- start: status bar -->
				<div class="ui bottom attached blue label">
					<!-- padding bar, will not show -->
					<div class="ui mini active inline loader" style="opacity: 0;"></div>
				</div>
				<div class="ui bottom left attached blue label">
					<div class="ui tiny inline bottom left pointing dropdown">
						<i class="tasks icon"></i>
						<div class="menu">
							<div class="item">New Problem</div>
							<div class="item">Upload...</div>
							<div class="item">Preset...</div>
						</div>
					</div>
					<span>Morpheus P2</span> <i class="edit icon"></i>
					|&nbsp;&nbsp;
					<div class="ui tiny inline bottom right pointing dropdown">
						<div class="text">Neo</div><i class="caret up icon"></i>
						<div class="menu">
							<div class="item">None</div>
							<div class="item">Neo</div>
							<div class="item">Mars</div>
						</div>
					</div>
					|&nbsp;&nbsp;
					<div class="ui tiny inline bottom right pointing dropdown">
						<div class="text">Size 3</div><i class="caret up icon"></i>
						<div class="menu">
							<div class="item">Size 3</div>
							<div class="item">Size 4</div>
							<div class="item">Size 5</div>
						</div>
					</div>
					|&nbsp;&nbsp;
					<div class="ui tiny inline bottom right pointing dropdown">
						<div class="text">1 Input</div><i class="caret up icon"></i>
						<div class="menu">
							<div class="item">1 Input</div>
							<div class="item">2 Inputs</div>
						</div>
					</div>
				</div>
				<div class="ui bottom right attached blue label">
						Status: Solved <i class="check icon"></i>
						&nbsp;&nbsp;
						Synthesize<!-- this will not show -->
				</div>
				<div class="ui bottom right attached yellow label">
					<!-- padding bar, will not show -->
					<div class="ui mini active inline loader" style="opacity: 0;"></div>
				</div>
				<a class="ui bottom right attached yellow label">
						Synthesize
				</a>
				<!-- end: status bar -->
				<!-- start: table zone -->
				<div class="ui fitted horizontal basic segments">
					<div class="ui center aligned segment" style="width:50%;">
						<div class="ui top left attached label">Input Table</div>
						<div id="ExampleInput"></div>
					</div>
					<div class="ui center aligned segment" style="width:50%;">
						<div class="ui top right attached label">Output Table</div>
						<div id="ExampleOutput"></div>
					</div>
				</div>
				<!-- end: table zone -->
				<div class="ui divider"></div>
				<!-- start: natural language zone -->
				<div class="ui left icon input" style="width: 100%;">
					<textarea placeholder="Attach a natural language description here for your question." oninput="auto_grow(this)" style="border: none; resize: none;"></textarea>
					<i class="search icon"></i>
				</div>
				<!-- end: natural language zone -->
				<div class="ui divider"></div>
				<!-- start: solution zone -->
				<div class="ui fitted horizontal basic segments">
					<div class="ui left aligned segment" style="width:50%;">
						<div class="ui top left attached label">Solution</div>
<pre><code>out0 = gather(input0, [-99, -5])
out1 = separate(out0, 2)
out2 = spread(out1, 2, 4)
out3 = mutate(out2, 3, /, 4)
out4 = select(out3, [-1])
output = out4</code></pre>
					</div>
					<div class="ui left aligned segment" style="width:50%;">
						<div class="ui top right attached label">Statistics</div>
						<br/>
						Concrete programs=: 25571<br/>
						Partial programs=: 20057<br/>
						Prune partial=:18506 %=:92.26703893902378<br/>
						Prune concrete=:21029 %=:82.23769113448829<br/>
						Total time: 32 seconds<br/>
					</div>
				</div>
				<!-- end: solution zone -->
			</div>
			<!-- end: problem card -->

			<br/>
			<br/>
			<br/>

		</div>
		<!-- end: main container -->
		<!-- start: footer menu -->
		<div class="ui bottom fixed inverted menu">
			<div class="ui center aligned inverted text menu">
				<a class="item" href="#"><i class="atom icon"></i>PLSE@UCSB</a>
				<a class="item" href="#">|</a>
				<a class="item" href="#"><i class="github icon"></i>Trinity</a>
				<a class="item" href="#">|</a>
				<a class="item" href="#"><i class="bug icon"></i>Bug Report</a>
			</div>
		</div>
		<!-- end: footer menu -->
	</body>
<script type="text/javascript">

	// initialize dropdowns
	$('.ui.dropdown').dropdown();

	function auto_grow(element) {
		element.style.height = "5px";
		element.style.height = (element.scrollHeight)+"px";
	}
	function firstRowRenderer(instance, td, row, col, prop, value, cellProperties) {
		Handsontable.renderers.TextRenderer.apply(this, arguments);
		td.style.fontWeight = 'bold';
		td.style.color = 'white';
		td.style.background = '#2185d0';
	}

	// =============================== //
	// ==== process example input ==== //
	// =============================== //
	var DataExampleInput = [
		["date","ship","latt","long"],
		["1-1-2018","Baltimore",41.3,61.4],
		["2-1-2018","Baltimore",7.1,17.5],
		["3-1-2018","Baltimore",6.3,81.4],
		["1-1-2018","Chester",82.1,52.3],
		["2-1-2018","Chester",6.3,62.1],
		["3-1-2018","Chester",9.9,73.2],
	];

	var ContainerExampleInput = document.getElementById('ExampleInput');
	var HotExampleInput = new Handsontable(ContainerExampleInput, {
	  data: DataExampleInput,
	  preventOverflow: 'horizontal',
	  rowHeaders: false,
	  colHeaders: false,
	  filters: false,
	  dropdownMenu: true,
	  contextMenu: true,
	  editor: 'text',
	  className: "TableCell",
	  licenseKey: "non-commercial-and-evaluation",
	  cells: function (row, col) {
	    var cellProperties = {};
	    var data = this.instance.getData();

	    if (row === 0) {
	      cellProperties.renderer = firstRowRenderer; // uses function directly
	    }

	    return cellProperties;
	  }
	});

	// ================================ //
	// ==== process example output ==== //
	// ================================ //
	var DataExampleOutput = [
		["date","Baltimore_latt","Baltimore_long","Chester_latt","Chester_long"],
		["1-1-2018",41.3,61.4,82.1,52.3],
		["2-1-2018",7.1,17.5,6.3,62.1],
		["3-1-2018",6.3,81.4,9.9,73.2],
	];

	var ContainerExampleOutput = document.getElementById('ExampleOutput');
	var HotExampleOutput = new Handsontable(ContainerExampleOutput, {
	  data: DataExampleOutput,
	  preventOverflow: 'horizontal',
	  rowHeaders: false,
	  colHeaders: false,
	  filters: false,
	  dropdownMenu: true,
	  contextMenu: true,
	  editor: "text",
	  className: "TableCell",
	  licenseKey: "non-commercial-and-evaluation",
	  cells: function (row, col) {
	    var cellProperties = {};
	    var data = this.instance.getData();

	    if (row === 0) {
	      cellProperties.renderer = firstRowRenderer; // uses function directly
	    }

	    return cellProperties;
	  }
	});
</script>
</html>